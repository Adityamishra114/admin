import{r as t,j as e}from"./react-Dto4uVCW.js";import{c as z}from"./react-dom-CfApFkai.js";import{L as G,N as q,B as J}from"./react-router-dom-B4QaS5N4.js";import{F as B,f as Y,a as W}from"./@fortawesome-BfJg1dUX.js";import{c as V,e as Q,f as X,g as L}from"./react-router-ClAZO8yM.js";import{J as M}from"./jodit-react-34robh7I.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BSEpXHBb.js";import"./prop-types-BYXrtxNC.js";(function(){const b=document.createElement("link").relList;if(b&&b.supports&&b.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))k(p);new MutationObserver(p=>{for(const m of p)if(m.type==="childList")for(const j of m.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&k(j)}).observe(document,{childList:!0,subtree:!0});function C(p){const m={};return p.integrity&&(m.integrity=p.integrity),p.referrerPolicy&&(m.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?m.credentials="include":p.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function k(p){if(p.ep)return;p.ep=!0;const m=C(p);fetch(p.href,m)}})();const Z="/admin/assets/logo-CQGk5Wws.png",K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI5SURBVHgBtZZbS5RRFIZfzaKgIDrQUAbaiamgA3S6ncv6DXXRrwjGoAuDsh/RTXZRPyAJSu/0QlEQL2QuxtHxjEcURhTB93WtTx3Rz/3N4YVnDvvb31p7r31YqwFhaiYZ0kpaSMrbl0me5MhfMo8qdZ/8csPbZJz8Iz+d/6RAtsgG+e3vJNZ58pmskWnSQR6S00f0bfJnX8kiWfd3LyBQCl8/bEZt5BLCpYFmyQrpdVsnOtOaTJKnqFwvYOEfQ4xTja7POz5C9XpMimQEx4RXcVconqN2UpS23XaZtLO02FnUXlm3nT7YqO28AAtriFLYP4sn6RSZch+7ugo7Qx0IVxf5k6D/N9hyNTfy4zXsLP1IYOAsOZegfyds42Tk8C5syjnUT6Puo1UOb8POyybqp0330aJQXiSzMZ21Ob6jPIRP/LvnQFuJvCdzx9iRj1Sj/2lA9Qqy0eQjuhXTRyN7c6gtmlkG4VKkipqhYqs8dwb1k2xrUvnI4Q1UmMcCpVvmOsnJocKjvPcugYGSE6q3sJ3aFTXo2lGivRxo4JoTIl1tS7DKYU+asmb5CbVXm9tOH36gFKJU8gy100uyStqPeqhMMUBmUF22j6QEXCBDiMlCN2ElxgR5hcqlARfdVlBdMwgLxUfYoodKu/4DbGmGEeAskkKguGuxVfp9QXyZ+MD7FP2ddoQn8zJpZ+nIlHzUBVgh3Onoty4OFcKr3jcdZzD00r4Cu0/vkTuwDKN3dc/m3Wk3rLyM1Q7IrnrJFjF9QAAAAABJRU5ErkJggg==",H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEPSURBVHgB1ZaNDYIwEIWfhgEYoW7gCk7gCo7gBnQDR3AFnQA3kA3ACXADvJMDmyjaUo7EL3mQ8HMfR5umQIuh5JSa0kwYrneU+lg4Ij7fKQWmw0gqygZi5q/IoEMm9XPujFvljlbQgx1YUlK0bWrCQ5MuMSOJnNdox04LwwceswYz0XV2oeygx4myTpwLN+jBsx2zTpC/le0ph18PPZcSxGGlTjlwP5f70TLriAwiZKkkRuQtK78Usp4ib1k2UNDCX+Qt+yS0CBMFyVxhPUIULHOFoaJRMmY7QtTLksCXzoiAlytekQ10MeLp/6eFDlbqH7t94xXtSlF0XzARXJO3HBVk3wi8NqqNQnLoD9M7D/ctiPZPx1n1AAAAAElFTkSuQmCC",$="/admin/assets/profile_image-CVVn_jUS.png",_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABGCAYAAAAHFFAPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAV/SURBVHgB7ZxLM2tZFMdXdqfRrhDhxqPa41a1RxWFMmDGzJCRMvMRfANfwpAZMzOMGGGgioFCUeXRVcJtCS46EU2Sy02f/64+qSQiOX2vmzp7Zf+q8jgnK/uk8t97rbXPOXs5NjY24r29vQS2t7flq97ms+2IRCJx0rBFRKNR0vAE2oqDgwPS8ATaiuLiYtLwBNrqGMwcEQ6HScMTaCtOTk5IwxNoK1wuF2l4Am11DGaOjsGM0TGYOTIGV1VVkYYn0FbHYOaI29tb0vAE2oqzszPS8ATairq6OtLwBNoWVAx+fv5G/usg3Yef6PExRs8v38j5i6ByVwl53GXkreZ30sdxenoaL4RRHIl+pYMjP0Vjz2/aeKtc1NxYLUXnQCAQIIEn7lgRF1zfhun08w1xAdo6m5ubiRshwwXDDQNvVTl99v+dU1yTLzdhOZIrXL+R6kBbdjH43H9HfxmC/gh1NRX0qaGaOCB8Ph9x4Tb4zw+LC+6MdjgAbcXd3R1x4fHxfW4gfDGybQ5AW8fNzU28rKyMVAZJVOAqRF+MJAlTn/fA4y41XLVb6Vj88PCgfgy+NpIin5H5WhUWooXkPNjaaIf9pwZ1L8iI4+NjUhWM3D9915bFbaj3SLE62+qNEfrB0ncCV0EjC1czjEFbgWGsKr7/MWeFuA31lfI9TmS0/1FLHy2euYL7fy/Xn0+grWhtbSVVuQ9HLNlBXMxtk8Fpy8Y6jyWRIa6KiRe0daqeYFkBLhYPuOby/5KmwHVQngCxysvLi/HsJJWAtmJ/f59UpbQ0P6syiot/zdux3hNoK2KxGKkKEqZ8XBhoaf5IKgJtRWdnJ6nKB2NUdXX8/tPmqmi322i/XNG5MLRlcy4aiVCuuS3crDniI7GvFIs+W7JVGUfyCn8NL7DCn8eVbc2b6NtmmaNLODCGdQmHy8tLyse17nwd53uwbQmH2dlZCgaDKftwj+/y8rLVJujo6IjW19fpZ4Pj7O7ukh2BtqKjo4PsRqab8SH41dUVaawDbZ1YYqjaInC4xKWlJRodHaWVlRXpJisrK6mvr4+6u7szfgcdZHFxUdqCtrY2GhwcJLfbLbeNZJPW1tYSoxGf46Y1bI+Pj79qA8eDjZ2Btk4sMVRxHow/GyIPDQ1RRUVFwoVDqP7+/le2cPvt7e00PDycEBP7JiYmpM38/LxMSsbGxmR7cL0Q0+wAmdrY29ujw8NDampqIjsCbZ0ql3DAH11TUyPfQwiIsLW19Urgzc1N+Tk6g8nIyAhNTU1JIRGr0EEgNsQFaAMhwQwXeHU4HClt1NbWJjyCHYG2oqWlhVTFFNcEIyk9OQMYbemjrKSkJCFQKBSSHcAUN7k9E9g1Njbm/A12AtratoRD+vwcIuWywTaEy0Qm4QHs8cjUfvI+2KAjWG3XDti2hANGzs7OTmIbfzTcbHpSs7q6mmKDGJwp8UHihfuTksVA8gS3i5iK48Xj8ZRpFWxxzOTfBPvkTB42dr6nTcZgO5ZwQHxEQnN+fk5er1fGSbjTnp6eFDvExJmZmYQNMltkxukgG0aGjTbRDjoDhEIMN90yjrmwsCAzdOzDsWFrCoo2BgYGaHp6OtGJMKLRedA57IjtSzjgzzbjY3I8xP65uTmanJx80wb7np6epEjJ+8yzThi56Sd58DliLToAPsdrrjZMN54ev+2C4+LiIq5aIZZkgTVvo0s4MEfZEg5wx11dXaTJTsGVcChECmKFf6FSMCUcChVo6/D7/XGPx0Mafsj1wToG84ZVCQdNKuxKOGhSYVPCQZMZFiUcNNlRuoSDJjvKl3DQZEe6aB2D+aJjcAGgdAkHTXaUL+GgyQ60ddzf38eLiopIww8psI7BvBFY5m+C93qb1/a/BYsdByekw9cAAAAASUVORK5CYII=",ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMNSURBVHgB7ZpLaBNBGMf/m2Tbumm0UsGCaAs+KMWTvYmgeBJ7kB701IsnT3oVvNjaIngWvAsFD/WgvenFFEREqlVpsGgFbTFU0pQ82rx3x28SvG2Smd01drfzg7Rb5psNv37zzWMTQKFQKBSKXYMGD2GLk8N0yytSnYwjo9D1Xtu2aimNwsYyZFh5taBNxN82a47AI9ji1BgYm4XG+oQ68H919BjQc8i+vVoAiuv8zhDFTCbi5ZX4PrpsKhyCSxgjxcWp23QxTxKCsvS2sePNZSt5IPeVbl6DKHXZd3MX2sW5yjB7/SCG98XHdDUuXByhMMmeAPSofXs5DeR/QgZRWY5jYbY0fRJm8Rldjgh3CncD+ymz4R779sJvev2CDDKyHEfC9XqtmbPCQ5ijGyRLmdVs3pKX6c4aUNqEDLKyHKkadlSvnK4YyZ5qImvREP7eEVmOcIYd1Sunu59qdtC+zTJJdpVm5B3I4FSWIyTsqF45xmG+ztq3mWWaiSmzZgkyuJHltBV2VK8ia2xuVWrZ4biV5bQUZk9PX0Pmy02aVBKQITY4hHImRi+bRquK1OdvYBUTElQyW/nap5eX4JLWGU4tj2Bz+RxkGTjbqF07+Dq78aYfkrAUFuABrndafkMJB509J+zZ8ZBj0aYpsw3UqknaSmbtg2iTESkCfbT5Cnl6GhfDM2GL9sPxD8BWjv/1o218/wHg/JnOS3s2pHPbf2XFSGcbfTqNZ8JRes7Q3SUez2OjBjqOZ0NapztdHAXW6UhbbbOH0ukZwNGBxu9O4+mkxbM8PIRdjVqHg44SDjpKOOgo4aCjhIOOEg46gRKmZwl5+vG8VYynp6X/CT1w4YfSieg0llrFBSbDmoZb0RnMt4sLivA0ZfaRSKDvhWkoPzFmcFc03tc1TJNU3MjiuibxVR//Zpg+0SxHMK49RFmmmy+FmYWkpuPywUlkZPv6Tri+1gJjxiTW4ABfCVOhVq0Qrvbex0c4xD/C4frEdKP3Hl7ABe1m6bjEVx3/KREDiZ47mINCoVAoFMHhD+60E1jOyIfxAAAAAElFTkSuQmCC",se="/admin/assets/video123-D1MI0ER8.mp4",T={logo:Z,add_icon:K,order_icon:H,profile_image:$,upload_area:_,parcel_icon:ee,video:se},oe="https://carrentalbackend-4zrn.onrender.com",E=oe;console.log("Backend URL:",E);const ae=()=>{const[g,b]=t.useState(!1),C=()=>{b(!g)},k=async()=>{try{const m=await(await fetch(`${E}/api/user/logout`,{method:"DELETE",credentials:"include"})).json();m.success?(console.log("Logged out successfully"),localStorage.removeItem("authToken"),window.location.href="/login"):console.error("Logout failed:",m.message)}catch(p){console.error("An error occurred during logout:",p)}};return e.jsxs("div",{className:"navbar",children:[e.jsx(G,{to:"/",children:e.jsx("img",{className:"logo",src:T.logo,alt:""})}),e.jsxs("div",{className:"profile-container",children:[e.jsx("img",{className:"profile",src:T.profile_image,alt:"Profile",onClick:C}),g&&e.jsx("div",{className:"dropdown-menu ",children:e.jsx("button",{onClick:k,className:"dropdown-item",children:"Logout"})})]})]})},re=()=>e.jsx("div",{className:"sidebar",children:e.jsxs("div",{className:"sidebar-options",children:[e.jsxs(q,{to:"/add-car",className:"sidebar-option",children:[e.jsx("img",{src:T.add_icon,alt:""}),e.jsx("p",{children:"Add Cars"})]}),e.jsxs(q,{to:"/cars-list",className:"sidebar-option",children:[e.jsx("img",{src:T.order_icon,alt:""}),e.jsx("p",{children:"Cars Lists"})]}),e.jsxs(q,{to:"/add-decoration",className:"sidebar-option",children:[e.jsx("img",{src:T.add_icon,alt:""}),e.jsx("p",{children:"Add Decoration"})]}),e.jsxs(q,{to:"/decorations-lists",className:"sidebar-option",children:[e.jsx("img",{src:T.order_icon,alt:""}),e.jsx("p",{children:"Decoration Lists"})]})]})}),te=()=>{const[g,b]=t.useState([]),C=V(),[k,p]=t.useState(""),[m,j]=t.useState(1),[s,w]=t.useState(1),R=10,r=async(i=1,F=!1)=>{try{const P=await fetch(`${E}/api/car/cars?page=${i}&limit=${F?0:R}`,{method:"GET",headers:{"Content-Type":"application/json"}});console.log("Backend URL:",E),console.log("response URL:",P);const f=await P.json();f.success?f.cars.length>0?(b(f.cars),w(f.pagination.totalPages),p("")):(b([]),p("No cars found.")):p("No cars found.")}catch(v){console.error("Fetch error:",v),p("")}};t.useEffect(()=>{r(m)},[m]);const l=i=>{C(`/edit-car/${i}`)},D=async i=>{if(console.log("Removing car with ID:",i),!window.confirm("Are you sure you want to delete this car?")){console.log("Car deletion cancelled.");return}try{const v=localStorage.getItem("authToken");if(!v){console.error("No token found. User might not be logged in.");return}console.log("Token being sent:",v);const f=await(await fetch(`${E}/api/car/remove-car/${i}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}})).json();f.success?(console.log("Car deleted successfully:",f.message),b(x=>x.filter(O=>O._id!==i)),r(m)):console.error("Error deleting car:",f.message||"Unknown error")}catch(v){console.error("Error deleting car:",v)}};return e.jsxs("div",{className:"list add flex-col",children:[e.jsx("p",{className:"text-xl font-bold",children:"All Cars List"}),k&&e.jsx("p",{className:"text-red-500",children:k}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"list-table mb-8 min-w-full",children:[e.jsxs("div",{className:"list-table-format title",children:[e.jsx("b",{className:"flex-1",children:"Image"}),e.jsx("b",{className:"flex-1",children:"Car Title"}),e.jsx("b",{className:"flex-1",children:"Car Color"}),e.jsx("b",{className:"flex-1",children:"Rental Price"}),e.jsx("b",{className:"flex-1",children:"Actions"})]}),g.map((i,F)=>e.jsxs("div",{className:"list-table-format",children:[i.photos&&i.photos.length>0?e.jsx("img",{src:i.photos}):e.jsx("p",{children:"No image available"}),e.jsx("p",{className:"truncate",children:i.title}),e.jsx("p",{children:i.color}),e.jsxs("p",{children:["â‚¹",i.rentalPrice]}),e.jsxs("span",{className:"flex space-x-2",children:[e.jsx("p",{onClick:()=>l(i._id),className:"cursor-pointer",children:e.jsx(B,{icon:Y,className:"text-blue-500 hover:text-blue-700"})}),e.jsx("p",{onClick:()=>D(i._id),className:"cursor-pointer",children:e.jsx(B,{icon:W,className:"text-red-500 hover:text-red-700"})})]})]},F))]})}),g.length>10&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{onClick:()=>{j(i=>Math.max(i-1,1)),r(m-1)},disabled:m===1,className:`px-4 py-2 bg-blue-500 text-white rounded ${m===1?"opacity-50 cursor-not-allowed":""}`,children:"Previous"}),e.jsx("span",{children:`Page ${m} of ${s}`}),e.jsx("button",{onClick:()=>{j(i=>Math.min(i+1,s)),r(m+1)},disabled:m===s,className:`px-4 py-2 bg-blue-500 text-white rounded ${m===s?"opacity-50 cursor-not-allowed":""}`,children:"Next"})]})]})},ne=()=>{const g=t.useRef(null),[b,C]=t.useState(""),[k,p]=t.useState(""),[m,j]=t.useState(!1),s=V(),w=t.useRef(null),R=t.useRef(null),[r,l]=t.useState({title:"",owner:{name:"",phone:"",email:"",instagram:"",facebook:""},photos:[],videos:[],yearOfProduction:"",color:"",interior:"",typeOfCar:"",numberOfSeats:"",additionalAmenities:[],rentalPrice:"",location:"",rentalDuration:"hourly",specialOptionsForWedding:[],description:"",isVerified:!1});t.useEffect(()=>{r.description&&C(r.description)},[r.description]);const D=h=>{C(h),r.description=h},[i,F]=t.useState([]),[v,P]=t.useState([]);t.useEffect(()=>{const h=localStorage.getItem("carFormData");h&&l(JSON.parse(h))},[]),t.useEffect(()=>{localStorage.setItem("carFormData",JSON.stringify(r))},[r]);const f=h=>{const{name:d,value:a}=h.target;if(d.startsWith("owner.")){const n=d.split(".")[1];l(N=>({...N,owner:{...N.owner,[n]:a}}))}else l(n=>({...n,[d]:a}))},x=5,O=5,I=3,c=60,u=(h,d)=>{const a=Array.from(h.target.files);let n=!0,N="";if(d==="photos")if(a.length>x?(n=!1,N=`You can upload a maximum of ${x} photos.`):a.reduce((S,A)=>S+A.size,0)/1048576>O*x&&(n=!1,N=`Each photo must be less than ${O} MB.`),n){l(S=>({...S,photos:a}));const y=a.map(S=>URL.createObjectURL(S));F(y)}else alert(N);else if(d==="videos")if(a.length>I?(n=!1,N=`You can upload a maximum of ${I} videos.`):a.reduce((S,A)=>S+A.size,0)/1048576>c*I&&(n=!1,N=`Each video must be less than ${c} MB.`),n){l(S=>({...S,videos:a}));const y=a.map(S=>URL.createObjectURL(S));P(y)}else alert(N)},o=async h=>{h.preventDefault(),j(!0);try{const d=localStorage.getItem("authToken");if(!d)throw new Error("No authentication token found.");const a=new FormData;a.append("title",r.title),a.append("owner[name]",r.owner.name),a.append("owner[phone]",r.owner.phone),a.append("owner[email]",r.owner.email),a.append("owner[instagram]",r.owner.instagram),a.append("owner[facebook]",r.owner.facebook),a.append("yearOfProduction",r.yearOfProduction),a.append("color",r.color),a.append("typeOfCar",r.typeOfCar),a.append("interior",r.interior),a.append("numberOfSeats",r.numberOfSeats),a.append("rentalPrice",r.rentalPrice),a.append("location",r.location),a.append("rentalDuration",r.rentalDuration),a.append("additionalAmenities",JSON.stringify(r.additionalAmenities)),a.append("specialOptionsForWedding",JSON.stringify(r.specialOptionsForWedding)),a.append("description",r.description),a.append("isVerified",r.isVerified),r.photos.forEach(y=>{a.append("photos",y)}),r.videos.forEach(y=>{a.append("videos",y)});for(let[y,S]of a.entries())console.log(y,S);const n=await fetch(`${E}/api/car/create-car`,{method:"POST",headers:{Authorization:`Bearer ${d}`},body:a,credentials:"include"});if(!n.ok){const y=await n.json(),S=y.errors?y.errors[0].msg:y.message||"An error occurred.";p(S);return}const N=await n.json();console.log("Car created successfully:",N),localStorage.removeItem("carFormData"),s("/cars-list")}catch(d){console.error("Fetch error:",d),p("An error occurred while submitting the form.")}finally{j(!1)}};return e.jsxs("form",{encType:"multipart/form-data",onSubmit:o,className:"max-w-lg mx-auto p-4 bg-white shadow-md rounded",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add New Car"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"title",children:"Car Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:r.title,onChange:f,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Car Owner Information"}),e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"owner.name",children:"Car Owner Name"}),e.jsx("input",{type:"text",required:!0,name:"owner.name",value:r.owner.name,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"owner.phone",children:"Car Owner Phone"}),e.jsx("input",{type:"text",required:!0,name:"owner.phone",value:r.owner.phone,onChange:f,minLength:10,maxLength:15,className:"w-full p-2 border border-gray-300 rounded"}),k&&e.jsx("p",{className:"text-red-700 text-sm",children:k})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"owner.email",children:"Car Owner Email"}),e.jsx("input",{type:"email",required:!0,name:"owner.email",value:r.owner.email,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"facebook",children:"Car Owner Facebook (optional)"}),e.jsx("input",{type:"text",name:"owner.facebook",value:r.owner.facebook,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"instagram",children:"Car Owner Instagram (optional)"}),e.jsx("input",{type:"text",name:"owner.instagram",value:r.owner.instagram,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"photos",children:"Photos"}),e.jsx("input",{ref:w,type:"file",name:"photos",required:!0,multiple:!0,accept:"image/*",onChange:h=>u(h,"photos"),className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:i.map((h,d)=>e.jsx("img",{src:h,alt:`preview ${d}`,className:"w-full h-32 object-cover rounded"},d))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"videos",children:"Videos"}),e.jsx("input",{ref:R,type:"file",name:"videos",multiple:!0,required:!0,accept:"video/*",onChange:h=>u(h,"videos"),className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4",children:v.map((h,d)=>e.jsx("video",{controls:!0,className:"w-full h-32 object-cover rounded",children:e.jsx("source",{src:h,type:"video/mp4"})},d))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"yearOfProduction",children:"Year of Production"}),e.jsx("input",{type:"number",required:!0,name:"yearOfProduction",value:r.yearOfProduction,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"color",children:"Color"}),e.jsx("input",{type:"text",name:"color",required:!0,value:r.color,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"typesOfCar",children:"Type of Car"}),e.jsx("input",{type:"text",name:"typeOfCar",required:!0,value:r.typeOfCar,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"interior",children:"Interior"}),e.jsx("input",{type:"text",name:"interior",required:!0,value:r.interior,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"numberOfSeats",children:"Number of Seats"}),e.jsx("input",{minLength:1,type:"number",required:!0,name:"numberOfSeats",value:r.numberOfSeats,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"additionalAmenities",children:"Additional Amenities (comma-separated)"}),e.jsx("input",{type:"text",required:!0,name:"additionalAmenities",value:r.additionalAmenities.join(", "),onChange:h=>l({...r,additionalAmenities:h.target.value.split(", ")}),className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"rentalPrice",children:"Rental Price"}),e.jsx("input",{type:"number",required:!0,name:"rentalPrice",value:r.rentalPrice,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"location",children:"Location"}),e.jsx("input",{type:"text",required:!0,name:"location",value:r.location,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"rentalDuration",children:"Rental Duration"}),e.jsxs("select",{name:"rentalDuration",required:!0,value:r.rentalDuration,onChange:f,className:"w-full p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"specialOptionsForWedding",children:"Special Options for Wedding (comma-separated)"}),e.jsx("input",{type:"text",required:!0,name:"specialOptionsForWedding",value:r.specialOptionsForWedding.join(", "),onChange:h=>l({...r,specialOptionsForWedding:h.target.value.split(", ")}),className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"description",children:"Description"}),e.jsx(M,{ref:g,value:b,tabIndex:1,onChange:D,className:"w-full border border-gray-300 rounded"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isVerified",checked:r.isVerified,onChange:()=>l({...r,isVerified:!r.isVerified}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Is Verified"})]})}),e.jsx("button",{type:"submit",disabled:m,className:`w-full p-2 text-white rounded ${m?"bg-gray-400":"bg-blue-600"}`,children:m?"Submitting...":"Add Car"})]})},le=()=>e.jsx("div",{className:"add",children:e.jsx(ne,{})}),ie=()=>{const{id:g}=Q(),[b,C]=t.useState(!1),k=t.useRef(null),[p,m]=t.useState(""),[j,s]=t.useState(""),w=V(),R=t.useRef(),r=t.useRef(),[l,D]=t.useState({title:"",owner:{name:"",phone:"",email:"",instagram:"",facebook:""},photos:[],videos:[],typeOfDecoration:"",location:"",description:"",isVerified:!1});t.useEffect(()=>{g&&(async()=>{try{const a=await fetch(`${E}/api/decor/decoration/${g}`);if(!a.ok)throw new Error("Failed to fetch decor data");const n=await a.json();n&&n.decor&&(D(n.decor),v(n.decor.photos||[]),f(n.decor.videos||[]))}catch(a){s(a.message)}})()},[g]),t.useEffect(()=>{l.description&&m(l.description)},[l.description]);const i=d=>{m(d),l.description=d},[F,v]=t.useState([]),[P,f]=t.useState([]);t.useEffect(()=>{const d=localStorage.getItem("decorFormData");d&&D(JSON.parse(d))},[]),t.useEffect(()=>{localStorage.setItem("decorFormData",JSON.stringify(l))},[l]);const x=d=>{const{name:a,value:n}=d.target;if(a.startsWith("owner.")){const N=a.split(".")[1];D(y=>({...y,owner:{...y.owner,[N]:n}}))}else D(N=>({...N,[a]:n}))},O=5,I=5,c=3,u=60,o=(d,a)=>{const n=Array.from(d.target.files);let N=!0,y="";if(a==="photos")if(n.length>O?(N=!1,y=`You can upload a maximum of ${O} photos.`):n.reduce((A,U)=>A+U.size,0)/1048576>I*O&&(N=!1,y=`Each photo must be less than ${I} MB.`),N){D(A=>({...A,photos:n}));const S=n.map(A=>URL.createObjectURL(A));v(S)}else alert(y);else if(a==="videos")if(n.length>c?(N=!1,y=`You can upload a maximum of ${c} videos.`):n.reduce((A,U)=>A+U.size,0)/1048576>u*c&&(N=!1,y=`Each video must be less than ${u} MB.`),N){D(A=>({...A,videos:n}));const S=n.map(A=>URL.createObjectURL(A));f(S)}else alert(y)},h=async d=>{d.preventDefault(),C(!0);try{const a=localStorage.getItem("authToken");if(!a)throw new Error("No authentication token found.");console.log("Form data before sending:",l);const n=new FormData;n.append("title",l.title),n.append("owner[name]",l.owner.name),n.append("owner[phone]",l.owner.phone),n.append("owner[email]",l.owner.email),n.append("owner[instagram]",l.owner.instagram),n.append("owner[facebook]",l.owner.facebook),n.append("typeOfDecoration",l.typeOfDecoration),n.append("location",l.location),n.append("description",l.description),n.append("isVerified",l.isVerified),l.photos.forEach(A=>{n.append("photos",A)}),l.videos.forEach(A=>{n.append("videos",A)});for(let[A,U]of n.entries())console.log(A,U);const N=await fetch(`${E}/api/decor/create-decorations`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:n,credentials:"include"});if(console.log("Form data after sending:",l),console.log("Form data after sending:",l.photos),console.log("Response:",N),!N.ok){const A=await N.json();if(console.error("Error Data:",A),A.message==="Not Authorized"){s("Session expired. Please log in again."),localStorage.removeItem("authToken"),w("/login");return}const U=A.errors?A.errors[0].msg:A.message||"An error occurred.";s(U);return}const y=await N.text(),S=JSON.parse(y);console.log("Data received:",S),localStorage.removeItem("decorFormData"),console.log("Decoration created successfully:",S),w("/decorations-lists")}catch(a){console.error("Fetch error:",a),s("An error occurred while submitting the form.")}finally{C(!1)}};return e.jsxs("form",{encType:"multipart/form-data",onSubmit:h,className:"max-w-lg mx-auto p-4 border rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Add Decoration"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:l.title,onChange:x,required:!0,className:"w-full border rounded p-2"})]}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Owner Information"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.name",children:"Name"}),e.jsx("input",{type:"text",name:"owner.name",value:l.owner.name,onChange:x,required:!0,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.phone",children:"Phone"}),e.jsx("input",{type:"text",name:"owner.phone",value:l.owner.phone,onChange:x,required:!0,minLength:10,maxLength:15,className:"w-full border rounded p-2"}),j&&e.jsx("p",{className:"text-red-700 text-sm",children:j})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.email",children:"Email"}),e.jsx("input",{type:"email",name:"owner.email",value:l.owner.email,onChange:x,required:!0,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.instagram",children:"Instagram"}),e.jsx("input",{type:"text",name:"owner.instagram",value:l.owner.instagram,onChange:x,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.facebook",children:"Facebook"}),e.jsx("input",{type:"text",name:"owner.facebook",value:l.owner.facebook,onChange:x,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"photos",children:"Photos"}),e.jsx("input",{ref:R,type:"file",name:"photos",required:!0,multiple:!0,accept:"image/*",onChange:d=>o(d,"photos"),className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:F.map((d,a)=>e.jsx("img",{src:d,alt:`preview ${a}`,className:"w-full h-32 object-cover rounded"},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"videos",children:"Videos"}),e.jsx("input",{ref:r,type:"file",name:"videos",multiple:!0,required:!0,accept:"video/*",onChange:d=>o(d,"videos"),className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4",children:P.map((d,a)=>e.jsx("video",{controls:!0,className:"w-full h-32 object-cover rounded",children:e.jsx("source",{src:d,type:"video/mp4"})},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"typeOfDecoration",children:"Type of Decoration"}),e.jsxs("select",{name:"typeOfDecoration",value:l.typeOfDecoration,onChange:x,required:!0,className:"w-full border rounded p-2",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Churches",children:"Churches"}),e.jsx("option",{value:"Halls",children:"Halls"}),e.jsx("option",{value:"Cars",children:"Cars"}),e.jsx("option",{value:"Chair Covers",children:"Chair Covers"}),e.jsx("option",{value:"LED Signs",children:"LED Signs"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"location",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:l.location,onChange:x,required:!0,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"description",children:"Description"}),e.jsx(M,{ref:k,value:p,tabIndex:1,onChange:i,className:"w-full border border-gray-300 rounded"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isVerified",checked:l.isVerified,onChange:()=>D(d=>({...d,isVerified:!d.isVerified})),className:"mr-2"}),"Is Verified"]})}),e.jsx("button",{type:"submit",disabled:b,className:`w-full p-2 text-white rounded ${b?"bg-gray-400":"bg-blue-600"}`,children:b?"Submitting...":"Add Decoration"}),j&&e.jsx("p",{className:"text-red-500 mt-2",children:j})]})},ce=()=>e.jsx("div",{className:"add",children:e.jsx(ie,{})}),de=()=>{const[g,b]=t.useState([]),C=V(),[k,p]=t.useState(""),[m,j]=t.useState(1),[s,w]=t.useState(1),R=10,r=async(i=1,F=!1)=>{try{const f=await(await fetch(`${E}/api/decor/decorations-lists?page=${i}&limit=${F?0:R}`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();f.success?f.decors.length>0?(b(f.decors),w(f.pagination.totalPages),p("")):(b([]),p("No decors found.")):p("No decors found.")}catch(v){console.error("Fetch error:",v),p("")}};t.useEffect(()=>{r(m)},[m]);const l=i=>{C(`/edit-decor/${i}`)},D=async i=>{if(console.log("Removing decor with ID:",i),!window.confirm("Are you sure you want to delete this decor?")){console.log("Decoration deletion cancelled.");return}try{const v=localStorage.getItem("authToken");if(!v){console.error("No token found. User might not be logged in.");return}console.log("Token being sent:",v);const f=await(await fetch(`${E}/api/decor/remove-decorations/${i}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}})).json();f.success?(console.log("Decoration deleted successfully:",f.message),b(x=>x.filter(O=>O._id!==i)),r(m)):console.error("Error deleting decor:",f.message||"Unknown error")}catch(v){console.error("Error deleting decor:",v)}};return e.jsxs("div",{className:"list add flex-col",children:[e.jsx("p",{className:"text-xl font-bold",children:"All Decorations List"}),k&&e.jsx("p",{className:"text-red-500",children:k}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"list-table mb-8 min-w-full",children:[e.jsxs("div",{className:"list-table-format title",children:[e.jsx("b",{className:"flex-1",children:"Image"}),e.jsx("b",{className:"flex-1",children:"Title"}),e.jsx("b",{className:"flex-1",children:"Location"}),e.jsx("b",{className:"flex-1",children:"Type of Decoration"}),e.jsx("b",{className:"flex-1",children:"Actions"})]}),g.map((i,F)=>(console.log(i.photos[0]),e.jsxs("div",{className:"list-table-format",children:[i.photos&&i.photos.length>0?e.jsx("img",{src:i.photos[0],onError:()=>console.error(`Failed to load image at ${i.photos[0]}`)}):e.jsx("p",{children:"No image available"}),e.jsx("p",{className:"truncate",children:i.title}),e.jsx("p",{children:i.location}),e.jsx("p",{children:i.typeOfDecoration}),e.jsxs("span",{className:"flex space-x-2",children:[e.jsx("p",{onClick:()=>l(i._id),className:"cursor-pointer",children:e.jsx(B,{icon:Y,className:"text-blue-500 hover:text-blue-700"})}),e.jsx("p",{onClick:()=>D(i._id),className:"cursor-pointer",children:e.jsx(B,{icon:W,className:"text-red-500 hover:text-red-700"})})]})]},F)))]})}),g.length>10&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{onClick:()=>{j(i=>Math.max(i-1,1)),r(m-1)},disabled:m===1,className:`px-4 py-2 bg-blue-500 text-white rounded ${m===1?"opacity-50 cursor-not-allowed":""}`,children:"Previous"}),e.jsx("span",{children:`Page ${m} of ${s}`}),e.jsx("button",{onClick:()=>{j(i=>Math.min(i+1,s)),r(m+1)},disabled:m===s,className:`px-4 py-2 bg-blue-500 text-white rounded ${m===s?"opacity-50 cursor-not-allowed":""}`,children:"Next"})]})]})},me=({setAuth:g})=>{const[b,C]=t.useState({}),k=V(),p=j=>{C({...b,[j.target.id]:j.target.value})},m=async j=>{j.preventDefault();try{const w=await(await fetch(`${E}/api/user/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).json();w.success?(g(!0),k("/login")):console.error(w.message)}catch(s){console.error("Error during signup:",s)}};return e.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx("img",{alt:"Your Company",src:T.logo,className:"mx-auto h-10 w-auto"}),e.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Sign up for an account"})]}),e.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900",children:"Full Name"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"name",name:"name",type:"text",required:!0,onChange:p,className:"block px-2 w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"email",name:"email",type:"email",required:!0,onChange:p,className:"block px-2 w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"password",name:"password",type:"password",required:!0,onChange:p,className:"block px-2 w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Sign up"})})]})})]})},ue=({setAuth:g})=>{const[b,C]=t.useState({}),k=V();t.useEffect(()=>{const j=localStorage.getItem("authToken");g(!!j)},[g]);const p=j=>{C({...b,[j.target.id]:j.target.value})},m=async j=>{j.preventDefault();try{const w=await(await fetch(`${E}/api/user/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(b)})).json();w.success?(localStorage.setItem("authToken",w.token),g(!0),k("/")):console.error(w.message)}catch(s){console.error("Error during login:",s)}};return e.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx("img",{alt:"Your Company",src:T.logo,className:"mx-auto h-10 w-auto"}),e.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Sign in to your account"})]}),e.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"email",name:"email",type:"email",required:!0,onChange:p,className:"block px-2 w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"password",name:"password",type:"password",required:!0,onChange:p,className:"block px-2 w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 "})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Sign in"})})]})})]})},pe=()=>e.jsxs("div",{className:"relative min-h-screen w-full bg-slate-700 flex justify-center items-center",children:[e.jsx("video",{autoPlay:!0,loop:!0,muted:!0,className:"absolute top-0 left-0 w-full h-full object-cover",children:e.jsx("source",{src:T.video,type:"video/mp4"})}),e.jsx("div",{className:"relative z-10 flex justify-center items-center bg-black bg-opacity-50 min-h-screen w-full",children:e.jsx("h1",{className:"text-white text-3xl md:text-4xl lg:text-5xl text-center",children:"Welcome to the Homepage!"})})]}),he=()=>{const{id:g}=Q(),[b,C]=t.useState(!1),[k,p]=t.useState(""),m=V(),j=t.useRef(null),[s,w]=t.useState({title:"",owner:{name:"",phone:"",email:"",facebook:"",instagram:""},photos:[],videos:[],yearOfProduction:"",color:"",typeOfCar:"",interior:"",numberOfSeats:"",additionalAmenities:[],rentalPrice:"",location:"",rentalDuration:"hourly",specialOptionsForWedding:[],description:"",isVerified:!1});t.useEffect(()=>{g&&(async()=>{try{const u=await fetch(`${E}/api/car/car/${g}`);if(!u.ok)throw new Error("Failed to fetch car data");const o=await u.json();w({...o.car,isVerified:o.car.isVerified||!1}),o&&o.car&&(w(o.car),i(o.car.photos||[]),v(o.car.videos||[]))}catch(u){l(u.message)}})()},[g]),console.log("Editing car with ID:",g),t.useEffect(()=>{s.description&&p(s.description)},[s.description]);const R=c=>{p(c),s.description=c},[r,l]=t.useState(""),[D,i]=t.useState([]),[F,v]=t.useState([]),P=t.useRef(null),f=t.useRef(null),x=c=>{const{name:u,value:o}=c.target;u.startsWith("owner.")?w({...s,owner:{...s.owner,[u.split(".")[1]]:o}}):w({...s,[u]:o})},O=(c,u)=>{const o=Array.from(c.target.files);u==="photos"?(w({...s,photos:o}),i(o.map(h=>URL.createObjectURL(h)))):u==="videos"&&(w({...s,videos:o}),v(o.map(h=>URL.createObjectURL(h))))},I=async c=>{c.preventDefault(),C(!0);try{const u=localStorage.getItem("authToken");if(!u)throw new Error("No authentication token found.");const o=new FormData;o.append("title",s.title),o.append("owner[name]",s.owner.name),o.append("owner[phone]",s.owner.phone),o.append("owner[email]",s.owner.email),o.append("owner[instagram]",s.owner.instagram),o.append("owner[facebook]",s.owner.facebook),o.append("yearOfProduction",s.yearOfProduction),o.append("color",s.color),o.append("typeOfCar",s.typeOfCar),o.append("interior",s.interior),o.append("numberOfSeats",s.numberOfSeats),o.append("rentalPrice",s.rentalPrice),o.append("location",s.location),o.append("rentalDuration",s.rentalDuration),o.append("additionalAmenities",JSON.stringify(s.additionalAmenities)),o.append("specialOptionsForWedding",s.specialOptionsForWedding),o.append("description",s.description),o.append("isVerified",s.isVerified),s.photos.forEach(a=>{o.append("photos",a)}),s.videos.forEach(a=>{o.append("videos",a)});for(let[a,n]of o.entries())console.log(a,n);const h=await fetch(`${E}/api/car/edit-car/${g}`,{method:"PUT",headers:{Authorization:`Bearer ${u}`},body:o,credentials:"include"});if(console.log("Response:",h),!h.ok){const a=await h.json();if(console.error("Error Data:",a),a.message==="Not Authorized"){l("Session expired. Please log in again."),localStorage.removeItem("authToken"),m("/login");return}const n=a.errors?a.errors[0].msg:a.message||"An error occurred.";l(n);return}const d=await h.json();console.log("Data received:",d),console.log("Car updated successfully:",d),m("/cars-list")}catch(u){console.error("Fetch error:",u),l("An error occurred while submitting the form.")}finally{C(!1)}};return e.jsxs("form",{encType:"multipart/form-data",onSubmit:I,className:"max-w-lg mx-auto p-4 bg-white shadow-md rounded",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Update Car"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"title",children:"Car Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:s.title,onChange:x,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Car Owner Information"}),e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"owner.name",children:"Car Owner Name"}),e.jsx("input",{type:"text",required:!0,name:"owner.name",value:s.owner.name,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"owner.phone",children:"Car Owner Phone"}),e.jsx("input",{type:"text",required:!0,name:"owner.phone",value:s.owner.phone,onChange:x,minLength:10,maxLength:15,className:"w-full p-2 border border-gray-300 rounded"}),r&&e.jsx("p",{className:"text-red-700 text-sm",children:r})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"owner.email",children:"Car Owner Email"}),e.jsx("input",{type:"email",required:!0,name:"owner.email",value:s.owner.email,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"facebook",children:"Car Owner Facebook (optional)"}),e.jsx("input",{type:"text",name:"owner.facebook",value:s.owner.facebook,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"instagram",children:"Car Owner Instagram (optional)"}),e.jsx("input",{type:"text",name:"owner.instagram",value:s.owner.instagram,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"photos",children:"Photos"}),e.jsx("input",{ref:P,type:"file",name:"photos",multiple:!0,accept:"image/*",onChange:c=>O(c,"photos"),className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:Array.isArray(D)&&D.map((c,u)=>e.jsx("img",{src:c,alt:`preview ${u}`,className:"w-full h-32 object-cover rounded"},u))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"videos",children:"Videos"}),e.jsx("input",{ref:f,type:"file",name:"videos",multiple:!0,accept:"video/*",onChange:c=>O(c,"videos"),className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4",children:Array.isArray(F)&&F.map((c,u)=>e.jsx("video",{controls:!0,className:"w-full h-32 object-cover rounded",children:e.jsx("source",{src:c,type:"video/mp4"})},u))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"yearOfProduction",children:"Year of Production"}),e.jsx("input",{type:"number",required:!0,name:"yearOfProduction",value:s.yearOfProduction,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"color",children:"Color"}),e.jsx("input",{type:"text",name:"color",required:!0,value:s.color,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"typesOfCar",children:"Type of Car"}),e.jsx("input",{type:"text",name:"typeOfCar",required:!0,value:s.typeOfCar,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"interior",children:"Interior"}),e.jsx("input",{type:"text",name:"interior",required:!0,value:s.interior,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"numberOfSeats",children:"Number of Seats"}),e.jsx("input",{type:"number",required:!0,name:"numberOfSeats",value:s.numberOfSeats,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"additionalAmenities",children:"Additional Amenities (comma-separated)"}),e.jsx("input",{type:"text",required:!0,name:"additionalAmenities",value:s.additionalAmenities.join(", "),onChange:c=>w({...s,additionalAmenities:c.target.value.split(", ")}),className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"rentalPrice",children:"Rental Price"}),e.jsx("input",{type:"number",required:!0,name:"rentalPrice",value:s.rentalPrice,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"location",children:"Location"}),e.jsx("input",{type:"text",required:!0,name:"location",value:s.location,onChange:x,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"rentalDuration",children:"Rental Duration"}),e.jsxs("select",{name:"rentalDuration",required:!0,value:s.rentalDuration,onChange:x,className:"w-full p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"specialOptionsForWedding",children:"Special Options for Wedding (comma-separated)"}),e.jsx("input",{type:"text",required:!0,name:"specialOptionsForWedding",value:s.specialOptionsForWedding.join(", "),onChange:c=>w({...s,specialOptionsForWedding:c.target.value.split(", ")}),className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"description",children:"Description"}),e.jsx(M,{ref:j,value:k,tabIndex:1,onChange:R,className:"w-full border border-gray-300 rounded"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isVerified",checked:s.isVerified,onChange:()=>w({...s,isVerified:!s.isVerified}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Is Verified"})]})}),e.jsx("button",{type:"submit",disabled:b,className:`w-full p-2 text-white rounded ${b?"bg-gray-400":"bg-blue-600"}`,children:b?"Updating...":"Update Car"})]})},xe=()=>e.jsx("div",{className:"add",children:e.jsx(he,{})}),fe=()=>{const{id:g}=Q(),[b,C]=t.useState(!1),k=V(),p=t.useRef(null),[m,j]=t.useState(""),[s,w]=t.useState({title:"",owner:{name:"",phone:"",email:"",instagram:"",facebook:""},photos:[],videos:[],typeOfDecoration:"",location:"",description:"",isVerified:!1});t.useEffect(()=>{s.description&&j(s.description)},[s.description]);const R=c=>{j(c),s.description=c},[r,l]=t.useState(""),[D,i]=t.useState([]),[F,v]=t.useState([]),P=t.useRef(null),f=t.useRef(null);t.useEffect(()=>{g&&(async()=>{try{const u=await fetch(`${E}/api/decor/decoration/${g}`);if(!u.ok)throw new Error("Failed to fetch car data");const o=await u.json();w({...o.decor,isVerified:o.decor.isVerified||!1}),w(o.decor),i(o.decor.photos),v(o.decor.videos)}catch(u){l(u.message)}})()},[g]);const x=c=>{const{name:u,value:o}=c.target;u.startsWith("owner.")?w({...s,owner:{...s.owner,[u.split(".")[1]]:o}}):w({...s,[u]:o})},O=(c,u)=>{const o=Array.from(c.target.files);if(u==="photos"){const h=o.map(d=>URL.createObjectURL(d));i(d=>[...d,...h]),w({...s,photos:[...s.photos,...o]})}else if(u==="videos"){const h=o.map(d=>URL.createObjectURL(d));v(d=>[...d,...h]),w({...s,videos:[...s.videos,...o]})}};t.useEffect(()=>()=>{D.forEach(c=>URL.revokeObjectURL(c)),F.forEach(c=>URL.revokeObjectURL(c))},[D,F]);const I=async c=>{c.preventDefault(),C(!0);try{const u=localStorage.getItem("authToken");if(!u)throw new Error("No authentication token found.");console.log("Form data before sending:",s);const o=new FormData;o.append("title",s.title),o.append("owner[name]",s.owner.name),o.append("owner[phone]",s.owner.phone),o.append("owner[email]",s.owner.email),o.append("owner[instagram]",s.owner.instagram),o.append("owner[facebook]",s.owner.facebook),o.append("typeOfDecoration",s.typeOfDecoration),o.append("location",s.location),o.append("description",s.description),o.append("isVerified",s.isVerified),s.photos.forEach(n=>{o.append("photos",n)}),s.videos.forEach(n=>{o.append("videos",n)});for(let[n,N]of o.entries())console.log(n,N);const h=await fetch(`${E}/api/decor/edit-decorations/${g}`,{method:"PUT",headers:{Authorization:`Bearer ${u}`},body:o,credentials:"include"});if(console.log("Response:",h),!h.ok){const n=await h.json();if(console.error("Error Data:",n),n.message==="Not Authorized"){l("Session expired. Please log in again."),localStorage.removeItem("authToken"),k("/login");return}const N=n.errors?n.errors[0].msg:n.message||"An error occurred.";l(N);return}const d=await h.text(),a=JSON.parse(d);console.log("Data received:",a),console.log("Decoration created successfully:",a),k("/decorations-lists")}catch(u){console.error("Fetch error:",u),l("An error occurred while submitting the form.")}finally{C(!1)}};return e.jsxs("form",{encType:"multipart/form-data",onSubmit:I,className:"max-w-lg mx-auto p-4 border rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Decoration"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:s.title,onChange:x,required:!0,className:"w-full border rounded p-2"})]}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Owner Information"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.name",children:"Name"}),e.jsx("input",{type:"text",name:"owner.name",value:s.owner.name,onChange:x,required:!0,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.phone",children:"Phone"}),e.jsx("input",{type:"text",name:"owner.phone",value:s.owner.phone,onChange:x,required:!0,minLength:10,maxLength:15,className:"w-full border rounded p-2"}),r&&e.jsx("p",{className:"text-red-700 text-sm",children:r})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.email",children:"Email"}),e.jsx("input",{type:"email",name:"owner.email",value:s.owner.email,onChange:x,required:!0,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.instagram",children:"Instagram"}),e.jsx("input",{type:"text",name:"owner.instagram",value:s.owner.instagram,onChange:x,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"owner.facebook",children:"Facebook"}),e.jsx("input",{type:"text",name:"owner.facebook",value:s.owner.facebook,onChange:x,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"photos",children:"Photos"}),e.jsx("input",{ref:P,type:"file",name:"photos",multiple:!0,accept:"image/*",onChange:c=>O(c,"photos"),className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:Array.isArray(D)&&D.map((c,u)=>e.jsx("img",{src:c,alt:`preview ${u}`,className:"w-full h-32 object-cover rounded"},u))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",htmlFor:"videos",children:"Videos"}),e.jsx("input",{ref:f,type:"file",name:"videos",multiple:!0,accept:"video/*",onChange:c=>O(c,"videos"),className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4",children:Array.isArray(F)&&F.map((c,u)=>e.jsx("video",{controls:!0,className:"w-full h-32 object-cover rounded",children:e.jsx("source",{src:c,type:"video/mp4"})},u))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"typeOfDecoration",children:"Type of Decoration"}),e.jsxs("select",{name:"typeOfDecoration",value:s.typeOfDecoration,onChange:x,required:!0,className:"w-full border rounded p-2",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Churches",children:"Churches"}),e.jsx("option",{value:"Halls",children:"Halls"}),e.jsx("option",{value:"Cars",children:"Cars"}),e.jsx("option",{value:"Chair Covers",children:"Chair Covers"}),e.jsx("option",{value:"LED Signs",children:"LED Signs"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"location",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:s.location,onChange:x,required:!0,className:"w-full border rounded p-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"description",children:"Description"}),e.jsx(M,{ref:p,value:m,tabIndex:1,onChange:R,className:"w-full border border-gray-300 rounded"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isVerified",checked:s.isVerified,onChange:()=>w(c=>({...c,isVerified:!c.isVerified})),className:"mr-2"}),"Is Verified"]})}),e.jsx("button",{type:"submit",disabled:b,className:`w-full p-2 text-white rounded ${b?"bg-gray-400":"bg-blue-600"}`,children:b?"Submitting...":"Add Decoration"}),r&&e.jsx("p",{className:"text-red-500 mt-2",children:r})]})},be=()=>e.jsx("div",{className:"add",children:e.jsx(fe,{})}),ge=()=>{const[g,b]=t.useState(!1);return t.useEffect(()=>{localStorage.getItem("authToken")&&b(!0)},[]),e.jsx("div",{children:g?e.jsxs(e.Fragment,{children:[e.jsx(ae,{}),e.jsx("hr",{}),e.jsxs("div",{className:"app-content",children:[e.jsx(re,{}),e.jsxs(X,{children:[e.jsx(L,{path:"/",element:e.jsx(pe,{})}),e.jsx(L,{path:"/add-car",element:e.jsx(le,{})}),e.jsx(L,{path:"/edit-car/:id",element:e.jsx(xe,{})}),e.jsx(L,{path:"/cars-list",element:e.jsx(te,{})}),e.jsx(L,{path:"/add-decoration",element:e.jsx(ce,{})}),e.jsx(L,{path:"/edit-decor/:id",element:e.jsx(be,{})}),e.jsx(L,{path:"/decorations-lists",element:e.jsx(de,{})})]})]})]}):e.jsxs(X,{children:[e.jsx(L,{path:"/signup",element:e.jsx(me,{setAuth:b})}),e.jsx(L,{path:"/login",element:e.jsx(ue,{setAuth:b})})]})})};z.createRoot(document.getElementById("root")).render(e.jsx(J,{children:e.jsx(ge,{})}));
